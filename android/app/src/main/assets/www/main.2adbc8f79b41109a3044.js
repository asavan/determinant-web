(()=>{"use strict";var e,t,o={},n={};function s(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}};return o[e](r,r.exports,s),r.exports}s.m=o,s.d=(e,t)=>{for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,o)=>(s.f[o](e,t),t)),[])),s.u=e=>e+"."+{92:"2807f8e47b5d6e6d53ac",299:"628d69f88ce6eabee927",420:"26e3cffc13455fd37ac3",495:"91d6efc33ec931ab0e60",578:"4218367686a7686b0444"}[e]+".js",s.miniCssF=e=>{},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="determinant-web:",s.l=(o,n,r,i)=>{if(e[o])e[o].push(n);else{var a,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+r){a=d;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.setAttribute("data-webpack",t+r),a.src=o),e[o]=[n];var m=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var s=e[o];if(delete e[o],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach((e=>e(n))),t)return t(n)},f=setTimeout(m.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=m.bind(null,a.onerror),a.onload=m.bind(null,a.onload),c&&document.head.appendChild(a)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");if(o.length)for(var n=o.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=o[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{s.b=document.baseURI||self.location.href;var e={792:0};s.f.j=(t,o)=>{var n=s.o(e,t)?e[t]:void 0;if(0!==n)if(n)o.push(n[2]);else{var r=new Promise(((o,s)=>n=e[t]=[o,s]));o.push(n[2]=r);var i=s.p+s.u(t),a=new Error;s.l(i,(o=>{if(s.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var r=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;a.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",a.name="ChunkLoadError",a.type=r,a.request=i,n[1](a)}}),"chunk-"+t,t)}};var t=(t,o)=>{var n,r,[i,a,c]=o,l=0;if(i.some((t=>0!==e[t]))){for(n in a)s.o(a,n)&&(s.m[n]=a[n]);if(c)c(s)}for(t&&t(o);l<i.length;l++)r=i[l],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0},o=self.webpackChunkdeterminant_web=self.webpackChunkdeterminant_web||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})(),(()=>{function e(e,t){const o="red"===t.color;let n=o,s=-1,r=-1,i=-1,a=-1,c=-1,l=-1,u=0,d=0;const m=e.emptyMatrix(),f=e.emptyBoolArray(),v=e.emptyBoolArray(),p=e.emptyBoolArray();const g=()=>{const t=e.getResultFromMatrix(m);return u=t,t},b=function(t,o){const u=function(t,o,n){return!(t<0||o<0||0!==m[t]||(m[t]=o+1,n?(v[t]=!0,i=t,a=-1):(f[t]=!0,a=t,i=-1),d=e.fill_digits(m,p),s=-1,r=-1,l=-1,c=-1,0))}(t,o,n);return u&&(n=!n),u},h=()=>r,y=()=>s;return{matrix_result:m,player_moves:f,comp_moves:v,getLastCompMove:()=>i,getLastUserMove:()=>a,isLastMove:e=>i===e||a===e,getResult:g,getActiveDigitIndex:h,setActiveDigitIndex:function(e){n&&"hotseat"!==t.mode||(r=e>=0&&p[e]?-1:e)},getActivePosition:y,setActivePosition:function(e){n&&"hotseat"!==t.mode||(s=e>=0&&m[e]>0?-1:e)},onAiMove:function(e){return u=e.result,b(e.bestPos,e.bestK)},onAiHint:function(e){u=e.result,l=e.bestPos,c=e.bestK},getDigits:()=>p,getStep:()=>d,endMessage:()=>(e=>g()>0!==e)(o)?"You win":"You lose",lessThanTwoMoves:()=>d+2>m.length,tryMove:function(){return b(y(),h())},isCurrentRed:()=>n,isBestDigit:e=>c===e,isBestPosition:e=>l===e}}const t=e=>new Promise((t=>setTimeout(t,e)));async function o(e,o,n){for(let t=0;t<e.matrix_result.length;t++){const n=o.childNodes[t],s=e.matrix_result[t];e.isLastMove(t)?n.classList.add("last"):n.classList.remove("last"),n.classList.contains("disabled")||(e.isBestPosition(t)?n.classList.add("best"):n.classList.remove("best"),s&&(n.classList.remove("hole"),n.textContent=s.toString(),n.classList.add("disabled"),n.classList.remove("active"),n.classList.remove("best")),e.getActivePosition()===t?(n.classList.add("active"),e.isCurrentRed()?n.classList.add("comp"):n.classList.add("player")):(n.classList.remove("active"),n.classList.remove("comp"),n.classList.remove("player")),e.comp_moves[t]&&n.classList.add("comp"),e.player_moves[t]&&n.classList.add("player"))}const s=e.getDigits();for(let o=0;o<e.matrix_result.length;o++){const r=o+1,i=n.querySelector(`div[data-num="${r}"]`);if(!i)continue;const a=s[o];a&&i.classList.add("disabled"),e.getActiveDigitIndex()===o?(i.classList.add("active"),e.isCurrentRed()?i.classList.add("comp"):i.classList.add("player")):(i.classList.remove("active"),i.classList.remove("comp"),i.classList.remove("player"),i.classList.remove("best")),o===e.matrix_result[e.getLastCompMove()]-1&&i.classList.add("comp"),o===e.matrix_result[e.getLastUserMove()]-1&&i.classList.add("player"),e.isBestDigit(o)&&i.classList.add("best"),a&&(await t(650),document.startViewTransition?document.startViewTransition((()=>{i.remove()})):i.remove())}}function n(e){return e.preventDefault(),e.target.classList.contains("cell")||e.target.classList.contains("digit")?e.target.classList.contains("disabled")?-1:function(e){const t=e.target||e.srcElement;return parseInt(t.dataset.num,10)-1}(e):-1}function r(){}function i(t,s,i){const a=s.querySelector(".box"),c=s.querySelector(".digits");if(3!==i.size){s.documentElement.style.setProperty("--field-size",i.size)}if(2===i.modeGuessCount){s.documentElement.style.setProperty("--digit-color","darkblue")}const l=function(e){const t=e*e,o=function(o){return 3===e?(e=>e[0]*e[4]*e[8]+e[6]*e[1]*e[5]+e[3]*e[7]*e[2]-e[2]*e[4]*e[6]-e[1]*e[3]*e[8]-e[0]*e[5]*e[7])(o):2===e?(e=>e[0]*e[3]-e[1]*e[2])(o):t},n=(e,t)=>{for(let o=0;o<e.length;++o)t[o]=e[o]};function s(e,o){let n=0;for(let s=0;s<t;++s){const t=e[s];t>0&&(++n,o[t-1]=!0)}return n}const r=()=>Array(t).fill(!1),i=()=>Array(t).fill(0);function a(e){const t=r();let o=s(e,t);for(let n=0,s=0;n<e.length&&s<t.length;++n,++s){for(;0!==e[n];)if(++n,n>=e.length)return o;for(;t[s];)if(++s,s>=t.length)return o;n<e.length&&(e[n]=s+1,t[s]=!0,++o)}return o}return{fill_digits:s,fill_matrix:a,matrix_to_int:function(e){let o=0;for(let n=0;n<t;++n)o*=10,o+=e[n];return o},copy_matrix:n,int_to_result:function(e){const t=e<0?-1:1,o=(e*=t)%10;e-=o;const n=(e/=10)%10;return e-=n,{result:t*(e/=10),bestK:n,bestPos:o}},emptyBoolArray:r,emptyMatrix:i,getResultFromMatrix:e=>{const t=i();return n(e,t),a(t),o(t)},determinant:o,getSize:()=>e,getSizeSqr:()=>t}}(i.size),u=e(l,i),d=function(e,t){return{initField:function(o,n,s){for(let r=0;r<t;r++){const t=e.createElement("div");for(const e of o)t.classList.add(e);const i=r+1;t.dataset.num=i,s&&(t.classList.add("card-"+i),t.textContent=i),n.appendChild(t)}}}}(s,l.getSizeSqr()),m=function(e,t){const o=e.querySelector(".overlay"),n=e.querySelector(".close"),s=e.querySelector(".install");return n.addEventListener("click",(e=>{e.preventDefault(),o.classList.remove("show")}),!1),{onGameEnd:function(){const e=t.endMessage();o.querySelector("h2").textContent=e,o.querySelector(".content").textContent="Determinant =  "+t.getResult(),o.classList.add("show"),s.classList.remove("hidden2")}}}(s,u),f={playerMove:r,enemyMove:r,meMove:r,aiMove:r,aiHint:r,gameover:r};async function v(e){if(await g(),!e)return;const t=u.isCurrentRed();u.lessThanTwoMoves()&&(m.onGameEnd(),f.gameover()),t?(u.getLastUserMove()>=0&&f.playerMove({bestPos:u.getLastUserMove(),bestK:u.matrix_result[u.getLastUserMove()]-1,result:0}),f.aiMove(u.matrix_result)):(u.getLastCompMove()>=0&&f.enemyMove({bestPos:u.getLastCompMove(),bestK:u.matrix_result[u.getLastCompMove()]-1,result:0}),f.meMove(u.matrix_result))}function p(){return v(u.tryMove())}function g(){return o(u,a,c)}d.initField(["cell","hole"],a,!1),d.initField(["digit"],c,!0);const b=s.querySelector(".cell");function h(){f.aiHint(u.matrix_result)}return b?.addEventListener("dblclick",h),a.addEventListener("click",(function(e){return u.setActivePosition(n(e)),p()}),!1),c.addEventListener("click",(function(e){return u.setActiveDigitIndex(n(e)),p()}),!1),{guess:h,allCallbacksInited:function(){return v(!0)},on:function(e,t){f[e]=t},wrap:function(e,t){const o=f[e];f[e]=e=>{o(e),t(e)}},aiMove:function(e){return v(u.onAiMove(e))},aiHint:function(e){u.onAiHint(e),g()},getSolver:function(){return l}}}function a(e){switch(e.toLowerCase().trim()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(e)}}const c={modes:["net","ai","hotseat","server","cheating","auto"],mode:"auto",wsPort:8088,color:"blue",size:3};function l(e){const t={...c};!function(e,t){const o=new URLSearchParams(e),n=[];for(const[e,s]of o)"number"==typeof t[e]?t[e]=Number.parseInt(s,10):"boolean"==typeof t[e]?t[e]=a(s):t[e]=s,n.push(e)}(e.location.search,t);return function(e,t,o){"auto"===t.mode&&("https:"===o.protocol||"file:"===o.protocol?t.mode="ai":"localhost"===o.hostname||"127.0.0.1"===o.hostname?t.mode="cheating":t.mode="net",t.modeGuessCount=1)}(0,t,e.location),t}const u=(e,t)=>{const o=t.default(e.getSolver());return e.on("aiMove",(t=>o.makeMove(t,e.aiMove))),e.on("aiHint",(t=>o.makeMove(t,e.aiHint))),e.allCallbacksInited()};function d(e,t,o){if("net"===o.mode)Promise.all([s.e(420),s.e(92)]).then(s.bind(s,92)).then((n=>{n.default(e,t,o,i).then((e=>e.allCallbacksInited())).catch((()=>{1===o.modeGuessCount&&(o.mode="ai",o.modeGuessCount=2,d(e,t,o))}))}));else if("server"===o.mode)Promise.all([s.e(420),s.e(299)]).then(s.bind(s,299)).then((n=>{o.color="black",n.default(e,t,o)}));else if("cheating"===o.mode)Promise.all([Promise.all([s.e(420),s.e(92)]).then(s.bind(s,92)),s.e(578).then(s.bind(s,578))]).then((([n,s])=>{n.default(e,t,o,i).then((e=>{const t=s.default(e.getSolver());return e.on("aiHint",(o=>t.makeMove(o,e.aiHint))),e.on("meMove",(o=>t.makeMove(o,e.aiHint))),e.allCallbacksInited()})).catch((()=>{if(1===o.modeGuessCount){o.mode="ai",o.modeGuessCount=2;const e=i(0,t,o);u(e,s)}}))}));else{const n=i(0,t,o);"ai"===o.mode?s.e(578).then(s.bind(s,578)).then((e=>u(n,e))):"hotseat"===o.mode&&n.allCallbacksInited(),e.gameObj=n}}!function(e,t){d(e,t,l(e))}(window,document)})()})();