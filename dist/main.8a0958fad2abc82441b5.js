!function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="./dist/",n(n.s=1)}([function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(0);var i="net";const s=function(t){const e=t*t;let n=-1,i=-1;const s=t=>t[0]*t[4]*t[8]+t[6]*t[1]*t[5]+t[3]*t[7]*t[2]-t[2]*t[4]*t[6]-t[1]*t[3]*t[8]-t[0]*t[5]*t[7],o=t=>t%2==0,r=function(t,n,i,l,c){if(i===e)return s(t);let a=0;for(let s=0;s<e;++s)if(!n[s]){if(++a,2===a&&i===e-2)break;n[s]=!0;for(let a=0;a<e;++a){if(0!==t[a])continue;t[a]=s+1;const e=r(t,n,i+1,l,c);if(o(i)?c<e&&(c=e):l>e&&(l=e),t[a]=0,!o(i)&&e<=c||o(i)&&e>=l)return n[s]=!1,e}n[s]=!1}return o(i)?c:l};function l(t,n){let i=0;for(let s=0;s<e;++s){const e=t[s];if(e>0){++i,n[e-1]=!0}}return i}return{solve_matrix_flat:function(t){const s=[];((t,n)=>{for(let i=0;i<e;++i)n[i]=t[i]})(t,s);const c=[];let a=l(s,c),u=500,d=-500;const f=o(a);if(a===e&&(u=r(s,c,a,u,d),n=-1,i=-1),0===a)return d=40,n=4,i=randomInteger(0,e),{result:d,bestK:n,bestPos:i};for(let t=0;t<e;++t){if(c[t])continue;c[t]=!0;const o=1===a?6:e;for(let e=0;e<o;++e){if(0!==s[e])continue;let o=!1;s[e]=t+1;const l=r(s,c,a+1,u,d);f?d<l&&(d=l,o=!0):u>l&&(u=l,o=!0),o&&(i=e,n=t),s[e]=0}c[t]=!1}return{result:f?d:u,bestK:n,bestPos:i}},fill_digits:l,isFirstStep:o,matrix_to_int:function(t){let n=0;for(let i=0;i<e;++i)n*=10,n+=t[i];return n},int_to_result:function(t){const e=t<0?-1:1,n=(t*=e)%10;t-=n;const i=(t/=10)%10;t-=i;return{result:e*(t/=10),bestK:i,bestPos:n}},determinant:s}},o=function(t){let e=-1,n=-1,i=-1,s=-1,o=-1,r=-1,l=0,c=-1;const a=[0,0,0,0,0,0,0,0,0],u=[!1,!1,!1,!1,!1,!1,!1,!1,!1],d=[!1,!1,!1,!1,!1,!1,!1,!1,!1];const f=()=>l,m=()=>c;return{matrix_result:a,player_moves:u,comp_moves:d,getLastCompMove:()=>i,getLastUserMove:()=>s,getResult:f,setUserMove:function(t,i){0===a[t]&&(a[t]=i+1,u[t]=!0,s=t,e=-1,n=-1)},getActiveDigitIndex:()=>n,setActiveDigitIndex:function(e){if(c=-1,e>=0){const i=[];if(c=t.fill_digits(a,i),i[e])return void(n=-1)}n=e},getActivePosition:()=>e,setActivePosition:function(t){e=t>=0&&a[t]>0?-1:t},getStep:m,onAiMove:function(t){l=t.result,r=t.bestPos,o=t.bestK,r>=0&&0===a[r]&&(a[r]=o+1,d[r]=!0,i=r),e=-1,n=-1},getDigits:function(){const e=[];return t.fill_digits(a,e),e},isWin:()=>f()>0===t.isFirstStep(c),lessThanTwoMoves:()=>m()+2>=a.length-1}};function r(t,e,n,i){let s=null;function o(t){e.onAiMove(t);const n=new Date;s&&n-s<700?setTimeout(i,700-(n-s)):i()}return{makeMove:function(){let i=t.fill_digits(e.matrix_result,[]);if(s=new Date,i===e.matrix_result.length){return o({result:t.determinant(e.matrix_result),bestK:-1,bestPos:-1}),s}if(0===i){return o({result:40,bestK:4,bestPos:((t,e)=>{let n=t+Math.random()*(e-t);return Math.floor(n)})(0,e.matrix_result.length)}),s}const r=t.matrix_to_int(e.matrix_result);return n.postMessage(r),s},onAiMoveWithAnimation:o}}const l=function(t,e){if(t.preventDefault(),t.target.classList.contains("cell")||t.target.classList.contains("digit"))return function(t,e){const n=t.target||t.srcElement;for(let t=0;t<e.children.length;t++)if(e.children[t]===n)return t;return-1}(t,e)};function c(t,e,n,i){function c(){p.getActivePosition()>=0&&p.getActiveDigitIndex()>=0&&(p.setUserMove(p.getActivePosition(),p.getActiveDigitIndex()),_.makeMove()),a()}function a(){!function(){for(let t=0;t<p.matrix_result.length;t++){const e=u.childNodes[t],n=p.matrix_result[t];e.textContent=n.toString(),e.className=n?"cell disabled":"cell hole",p.getActivePosition()===t&&e.classList.add("active"),p.comp_moves[t]&&e.classList.add("comp"),p.player_moves[t]&&e.classList.add("player"),t!==p.getLastUserMove()&&t!==p.getLastCompMove()||e.classList.add("last")}const t=p.getDigits();for(let e=0;e<p.matrix_result.length;e++){const n=d.childNodes[e],i=t[e],s=e+1;n.textContent=s.toString(),n.className="digit",i&&n.classList.add("disabled"),p.getActiveDigitIndex()===e&&n.classList.add("active"),e===p.matrix_result[p.getLastCompMove()]-1&&n.classList.add("comp"),e===p.matrix_result[p.getLastUserMove()]-1&&n.classList.add("player")}}()}const u=e.getElementsByClassName("box")[0],d=e.getElementsByClassName("digits")[0],f=e.getElementsByClassName("overlay")[0],m=e.getElementsByClassName("close")[0],g=e.getElementsByClassName("install")[0],v=s(3),p=o(v),_=r(v,p,i,(function(){a(),p.lessThanTwoMoves()&&function(){const t=p.isWin()?"You win":"You lose";f.querySelectorAll("h2")[0].textContent=t,f.querySelectorAll(".content")[0].textContent="Determinant =  "+p.getResult(),f.classList.add("show"),g.classList.remove("hidden2")}()}));function h(t,n,i){for(let s=0;s<t;s++){const t=e.createElement("div");t.className=n,i.appendChild(t)}}return h(p.matrix_result.length,"cell",u),h(p.matrix_result.length,"digit",d),u.addEventListener("click",(function(t){p.setActivePosition(l(t,u)),c()}),!1),d.addEventListener("click",(function(t){p.setActiveDigitIndex(l(t,d)),c()}),!1),m.addEventListener("click",(function(t){t.preventDefault(),f.classList.remove("show")}),!1),i.addEventListener("message",(function(t){!function(t){const e=v.int_to_result(t);_.onAiMoveWithAnimation(e)}(t.data)}),!1),a(),n&&_.makeMove(),{guess:()=>_.makeMove()}}!function(){const t=document.createElement("canvas"),e=document.getElementById("favicon");t.height=t.width=16;const n=t.getContext("2d");n.fillStyle="#000"}();var a;a=function(){const t=window.location.search,e=new URLSearchParams(t),n=!!e.get("startRed")&&!!JSON.parse(e.get("startRed"));let s=null;window.Worker&&(s=new Worker("worker.js")),function(t,e,n){let i=null;switch(t){case"net":i=c(window,document,e,n)}}(i,n,s)},"loading"!==document.readyState?a():document.addEventListener("DOMContentLoaded",(function(t){a()})),"serviceWorker"in navigator&&(navigator.serviceWorker.register("./sw.js",{scope:"./"}),function(t,e){const n=e.querySelector(".butInstall");let i;n.addEventListener("click",t=>{n.classList.add("hidden"),i.prompt(),i.userChoice.then(t=>{})}),t.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),i=t,n.classList.remove("hidden")})}(window,document))}]);