!function(t){var e={};function n(o){if(e[o])return e[o].exports;var s=e[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(o,s,function(e){return t[e]}.bind(null,s));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="./dist/",n(n.s=1)}([function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(0);var o="net";function s(t,e,n,o){const s=function(){let t=-1,e=-1;const n=(t,e)=>{let n=t+Math.random()*(e-t);return Math.floor(n)},o=t=>t[0]*t[4]*t[8]+t[6]*t[1]*t[5]+t[3]*t[7]*t[2]-t[2]*t[4]*t[6]-t[1]*t[3]*t[8]-t[0]*t[5]*t[7],s=t=>t%2==0,i=function(t,e,n,r,l){if(9===n)return o(t);let c=0;for(let o=0;o<9;++o)if(!e[o]){if(++c,2===c&&7===n)break;e[o]=!0;for(let c=0;c<9;++c){if(0!==t[c])continue;t[c]=o+1;const a=i(t,e,n+1,r,l);if(s(n)?l<a&&(l=a):r>a&&(r=a),t[c]=0,!s(n)&&a<=l||s(n)&&a>=r)return e[o]=!1,a}e[o]=!1}return s(n)?l:r};function r(t,e){let n=0;for(let o=0;o<9;++o){const s=t[o];if(s>0){++n,e[s-1]=!0}}return n}return{solve_matrix_flat:function(o){const l=[];((t,e)=>{for(let n=0;n<9;++n)e[n]=t[n]})(o,l);const c=[];let a=r(l,c),u=500,d=-500;const f=s(a);if(9===a&&(u=i(l,c,a,u,d),t=-1,e=-1),0===a)return d=40,t=4,e=n(0,9),{result:d,bestK:t,bestPos:e};for(let n=0;n<9;++n){if(c[n])continue;c[n]=!0;const o=1===a?6:9;for(let s=0;s<o;++s){if(0!==l[s])continue;let o=!1;l[s]=n+1;const r=i(l,c,a+1,u,d);f?d<r&&(d=r,o=!0):u>r&&(u=r,o=!0),o&&(e=s,t=n),l[s]=0}c[n]=!1}return{result:f?d:u,bestK:t,bestPos:e}},fill_digits:r,isFirstStep:s,matrix_to_int:function(t){let e=0;for(let n=0;n<9;++n)e*=10,e+=t[n];return e},int_to_result:function(t){const e=t<0?-1:1,n=(t*=e)%10;t-=n;const o=(t/=10)%10;t-=o;return{result:e*(t/=10),bestK:o,bestPos:n}},determinant:o,randomInteger:n}}(),i=function(t){let e=-1,n=-1,s=-1,r=-1,c=-1,a=-1,u=0,d=-1;const f=[0,0,0,0,0,0,0,0,0],v=[!1,!1,!1,!1,!1,!1,!1,!1,!1],m=[!1,!1,!1,!1,!1,!1,!1,!1,!1];let g=null;function p(t){u=t.result,a=t.bestPos,c=t.bestK,a>=0&&0===f[a]&&(f[a]=c+1,m[a]=!0,s=a),e=-1,n=-1}function b(t){p(t);const e=new Date;g&&e-g<700?setTimeout(l,700-(e-g)):l()}return{matrix_result:f,player_moves:v,comp_moves:m,getLastCompMove:()=>s,getLastUserMove:()=>r,makeMove:function(){let e=t.fill_digits(f,[]);if(g=new Date,9===e){return b({result:t.determinant(f),bestK:-1,bestPos:-1}),g}if(0===e){return b({result:40,bestK:4,bestPos:t.randomInteger(0,9)}),g}const n=t.matrix_to_int(f);return o.postMessage(n),g},getResult:()=>u,setUserMove:function(t,o){0===f[t]&&(f[t]=o+1,v[t]=!0,r=t,e=-1,n=-1)},getActiveDigitIndex:()=>n,setActiveDigitIndex:function(e){if(d=-1,e>=0){const o=[];if(d=t.fill_digits(i.matrix_result,o),o[e])return void(n=-1)}n=e},getActivePosition:()=>e,setActivePosition:function(t){e=t>=0&&f[t]>0?-1:t},getStep:()=>d,onAiMove:p,onWorkerMove:function(e){b(t.int_to_result(e))}}}(s),r=function(t,e){if(t.preventDefault(),t.target.classList.contains("cell")||t.target.classList.contains("digit"))return function(t,e){const n=t.target||t.srcElement;for(let t=0;t<e.children.length;t++)if(e.children[t]===n)return t;return-1}(t,e)};function l(){a(),i.getStep()>5&&function(){const t=i.getResult()>0&&s.isFirstStep(i.getStep())?"You win":"You lose";f.querySelectorAll("h2")[0].textContent=t,f.querySelectorAll(".content")[0].textContent="Result "+i.getResult(),f.classList.add("show"),m.classList.remove("hidden2")}()}function c(){i.getActivePosition()>=0&&i.getActiveDigitIndex()>=0&&(i.setUserMove(i.getActivePosition(),i.getActiveDigitIndex()),i.makeMove()),a()}function a(){!function(){const t=[];for(let t=0;t<9;t++){const e=u.childNodes[t],n=i.matrix_result[t];e.textContent=n.toString(),e.className=n?"cell disabled":"cell hole",i.getActivePosition()===t&&e.classList.add("active"),i.comp_moves[t]&&e.classList.add("comp"),i.player_moves[t]&&e.classList.add("player"),t!==i.getLastUserMove()&&t!==i.getLastCompMove()||e.classList.add("last")}s.fill_digits(i.matrix_result,t);for(let e=0;e<9;e++){const n=d.childNodes[e],o=t[e],s=e+1;n.textContent=s.toString(),n.className="digit",o&&n.classList.add("disabled"),i.getActiveDigitIndex()===e&&n.classList.add("active"),e===i.matrix_result[i.getLastCompMove()]-1&&n.classList.add("comp"),e===i.matrix_result[i.getLastUserMove()]-1&&n.classList.add("player")}}()}const u=e.getElementsByClassName("box")[0],d=e.getElementsByClassName("digits")[0],f=e.getElementsByClassName("overlay")[0],v=e.getElementsByClassName("close")[0],m=e.getElementsByClassName("install")[0];for(let t=0;t<9;t++){const t=e.createElement("div");t.className="cell",u.appendChild(t)}for(let t=0;t<9;t++){const t=e.createElement("div");t.className="cell",d.appendChild(t)}!function(){const t=e.createElement("canvas"),n=e.getElementById("favicon");t.height=t.width=16;const o=t.getContext("2d");o.fillStyle="#000"}();return u.addEventListener("click",(function(t){i.setActivePosition(r(t,u)),c()}),!1),d.addEventListener("click",(function(t){i.setActiveDigitIndex(r(t,d)),c()}),!1),v.addEventListener("click",(function(t){t.preventDefault(),f.classList.remove("show")}),!1),o.addEventListener("message",(function(t){i.onWorkerMove(t.data)}),!1),a(),n&&i.makeMove(),{guess:()=>i.makeMove()}}var i;i=function(){const t=window.location.search,e=new URLSearchParams(t),n=!!e.get("startRed")&&!!JSON.parse(e.get("startRed"));let i=null;window.Worker&&(i=new Worker("worker.js")),function(t,e,n){let o=null;switch(t){case"net":o=s(window,document,e,n)}}(o,n,i)},"loading"!==document.readyState?i():document.addEventListener("DOMContentLoaded",(function(t){i()})),"serviceWorker"in navigator&&(navigator.serviceWorker.register("./sw.js",{scope:"./"}),function(t,e){const n=e.querySelector(".butInstall");let o;n.addEventListener("click",t=>{n.classList.add("hidden"),o.prompt(),o.userChoice.then(t=>{})}),t.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),o=t,n.classList.remove("hidden")})}(window,document))}]);